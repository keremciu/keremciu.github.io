import { useState, useEffect } from "react";

export default function Stats() {
  const [scrollTop, setScrollTop] = useState(0);

  useEffect(() => {
    const onScroll = (e) => {
      setScrollTop(e.target.documentElement.scrollTop);
    };
    window.addEventListener("scroll", onScroll);

    return () => window.removeEventListener("scroll", onScroll);
  }, [scrollTop]);

  let bikeTransitionValue = 0;

  if (process.browser) {
    const scrollTopPercent =
      (scrollTop / window.document.scrollingElement.scrollHeight) * 100;
    bikeTransitionValue = Math.ceil(
      (scrollTopPercent * window.document.scrollingElement.scrollWidth) / 100
    );
  }

  return (
    <div data-style="stats" className="wrapper">
      <section>
        <div className="items">
          <div className="item">
            <p>Contributions in the last year</p>
            <h4>642+</h4>
          </div>
          <div className="item">
            <p>Cycling trips in the last year</p>
            <h4>876km</h4>
          </div>
          <div className="item">
            <p>Working as a frontend developer</p>
            <h4>11+ years</h4>
          </div>
        </div>
        <svg
          className="bike svg"
          viewBox="0 0 91 56"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path d="M71.3 17.7001C69.3 17.7001 67.4 18 65.6 18.6L59.7 3.30005C61.3 3.30005 62.9 3.30005 63 3.30005C63.3 3.30005 63.7 3.30005 64 3.30005C63.7 3.50005 63.3 3.90005 62.6 4.30005C62 4.70005 61.9 5.40005 62.2 6.00005C62.4 6.40005 62.8 6.60005 63.2 6.60005C63.4 6.60005 63.7 6.50005 63.9 6.40005C65.6 5.30005 67.3 3.90005 66.8 2.40005C66.3 0.900049 64.1 0.800049 62.8 0.800049C62.8 0.800049 57.2 0.800049 56.2 0.800049C55.5 0.800049 55 1.40005 55 2.00005C55 2.70005 55.6 3.20005 56.2 3.20005C56.3 3.20005 56.6 3.20005 56.9 3.20005L58.9 8.30005L35.8 8.20005L34.8 5.70005H36.4C37.1 5.70005 37.6 5.10005 37.6 4.50005C37.6 3.80005 37 3.30005 36.4 3.30005H29.9C29.2 3.30005 28.7 3.90005 28.7 4.50005C28.7 5.20005 29.3 5.70005 29.9 5.70005H32.2L33.6 9.30005L27.2 19.7001C24.7 18.4001 21.8 17.7001 18.8 17.7001C18.8 17.7001 18.8 17.7001 18.7 17.7001C8.4 17.7001 0 26.0001 0 36.4001C0 46.8 8.3 55.2 18.7 55.2C18.7 55.2 18.7 55.2 18.8 55.2C28.6 55.2 36.7 47.6001 37.5 38H45.5C46 38 46.4 37.8001 46.6 37.4001L60.5 12.3L63.3 19.5C56.9 22.5 52.5 28.9001 52.5 36.4001C52.5 46.8 60.8 55.2 71.2 55.2C71.2 55.2 71.2 55.2 71.3 55.2C81.6 55.2 90 46.8 90.1 36.5C90 26.2001 81.7 17.7001 71.3 17.7001ZM18.8 52.7C14.4 52.7 10.3 51 7.2 47.9001C4.1 44.8001 2.5 40.7001 2.5 36.4001C2.5 27.5001 9.8 20.2001 18.8 20.2001H18.9C21.5 20.2001 23.9 20.8001 26 21.9001L17.3 36.1C17.1 36.5 17.1 37 17.3 37.4001C17.5 37.8001 17.9 38 18.4 38H35C34.2 46.3 27.2 52.7 18.8 52.7ZM20.5 35.5L28.1 23.1C32.1 25.9 34.7 30.4 35 35.5H20.5ZM37.5 35.5C37.2 29.5 34.1 24.2001 29.4 21L34.8 12.2001L43.7 35.5H37.5ZM45.7 33.8L36.9 10.7001L58.5 10.8L45.7 33.8ZM71.2 52.7C62.2 52.7 54.9 45.3 54.9 36.4001C54.9 30.0001 58.7 24.4 64.2 21.8L70 36.9001C70.2 37.4001 70.7 37.7001 71.2 37.7001C71.3 37.7001 71.5 37.7 71.6 37.6C72.2 37.4 72.6 36.6 72.3 36L66.5 20.9001C68 20.4001 69.6 20.2001 71.2 20.2001H71.3C75.7 20.2001 79.7 21.9 82.8 25C85.9 28.1 87.5 32.2001 87.5 36.5C87.5 45.5 80.2 52.7 71.2 52.7Z" />
        </svg>
        <svg
          className="nature svg"
          viewBox="0 0 150 122"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path d="M40.9688 121.996H83.6568C83.941 118.531 84.2026 113.667 84.2026 111.107H73.5508L77.9368 103.015H75.7438L80.1298 94.9234H78.5634L85.1424 79.9846L91.7215 94.9234H90.155L94.5411 103.015H92.3481L96.7341 111.107H86.0823C86.0823 113.674 86.3454 118.53 86.6304 121.996L121.484 122V107.598C105.888 118.59 87.7446 96.3925 102.06 83.4081C99.2403 77.8061 100.494 70.9593 105.506 66.9133C104.88 62.245 107.699 57.8877 112.085 56.0204C110.519 48.8622 115.845 42.0153 123.364 42.0153C130.256 42.0153 136.208 48.2398 134.642 56.0204C139.028 57.8877 141.848 62.245 141.221 66.9133C144.354 69.4031 146.234 73.1377 146.234 77.1837C146.234 79.3622 145.607 81.2296 144.667 83.0969C159.294 96.3906 140.843 118.283 125.243 107.287V121.996H35.6429V99.2806C13.3994 115.776 -13.2301 84.0308 7.44688 65.0461C3.37413 56.9543 5.56715 46.9951 12.4595 41.393C11.833 34.8573 15.5924 28.3216 22.1715 25.8318C19.9785 15.5614 27.8107 5.60214 38.4625 5.60214C48.4877 5.60214 56.9465 14.9389 54.7535 25.8318C61.3325 28.3216 65.092 34.8573 64.4654 41.393C71.671 47.3063 73.5508 56.9543 69.478 65.0461C90.155 84.0308 63.2122 115.776 40.9688 99.2806V121.996ZM71.671 1.86735C71.3577 1.86735 70.7312 1.55612 70.7312 0.933675C70.7312 0.311226 71.0445 0 71.671 0C71.9843 0 74.4906 0 76.3704 2.17857C77.3102 2.80102 77.9368 3.7347 78.2501 4.9796C78.5634 4.04592 79.1899 2.80102 80.1298 2.17857C82.3228 0.311226 84.8291 0.311226 84.8291 0.311226C85.4557 0.311226 85.769 0.62245 85.769 1.2449C85.769 1.86735 85.4557 2.17857 84.8291 2.17857C84.8291 2.17857 82.9494 2.17857 81.383 3.7347C79.1899 5.91327 78.8767 9.02552 78.8767 11.5153C78.5634 12.7602 76.9969 12.7602 76.9969 11.5153C76.9969 9.02552 77.3102 5.60204 75.1172 3.42347C73.5508 1.86735 71.671 1.86735 71.671 1.86735ZM107.073 13.6939C106.759 13.6939 106.446 13.3827 106.446 12.7603C106.446 12.449 106.759 12.1378 107.073 12.1378C107.073 12.1378 108.639 12.1378 110.205 13.6939C110.832 14.3164 111.145 14.9388 111.459 15.8725C111.772 15.2501 112.085 14.6276 112.712 14.0052C114.278 12.7603 116.158 12.7603 116.158 12.7603C116.471 12.7603 116.785 13.0715 116.785 13.3827C116.785 13.6939 116.471 14.0052 116.158 14.0052C116.158 14.0052 114.905 14.0052 113.652 14.9388C112.085 16.495 112.085 18.9848 112.085 20.5409C112.085 21.4746 110.832 21.1633 110.832 20.5409C110.832 18.6735 111.145 16.495 109.579 14.9388C108.326 13.6939 107.073 13.6939 107.073 13.6939ZM86.7088 55.0869C86.3955 55.0869 86.0822 54.7757 86.0822 54.4645C86.0822 54.1532 86.3955 53.842 86.7088 53.842C88.2752 53.842 90.1549 55.0869 91.0948 57.5766C92.0347 55.0869 94.541 53.842 95.7941 54.1532C96.1074 54.1532 96.4207 54.4645 96.4207 54.7757C96.4207 55.0869 96.1074 55.3981 95.7941 55.3981C95.7941 55.3981 94.541 55.398 93.2878 56.3317C91.7214 57.8878 91.7214 60.3777 91.7214 61.9339C91.7214 62.8675 90.4682 62.5563 90.4682 61.9339C90.4682 60.0665 90.7815 57.8878 89.2151 56.3317C87.9619 55.0868 86.7088 55.0869 86.7088 55.0869ZM124.93 1.55612C124.617 1.55612 124.303 1.2449 124.303 0.933675C124.303 0.62245 124.617 0.311226 124.93 0.311226C124.93 0.311226 126.496 0.311226 127.436 0.933675L128.376 2.80102C129.003 0.62245 130.883 0 132.136 0C132.449 0 132.762 0.311226 132.762 0.62245C132.762 0.933675 132.449 1.2449 132.136 1.2449C132.136 1.2449 131.196 1.2449 130.256 2.17857C129.003 3.42347 129.003 5.29082 129.003 6.84694C129.003 7.46939 128.063 7.46939 128.063 6.84694C128.063 5.60204 128.063 3.7347 126.81 2.4898C125.87 1.55612 124.93 1.55612 124.93 1.55612Z" />
        </svg>
      </section>
      <style jsx>{`
        .items {
          display: flex;
        }
        .item {
          margin-right: 1rem;
        }
        .item p {
          font-size: 0.8rem;
        }
        .item h4 {
          font-size: 1.4rem;
          margin-top: 0;
        }
        .wrapper section {
          position: relative;
          padding: 2rem 0 4rem;
        }
        .svg {
          fill: var(--accent-color);
        }
        .bike {
          position: absolute;
          bottom: -1px;
          left: -4rem;
          transform: translateX(${bikeTransitionValue}px);
          width: 5.1rem;
          height: 3.1rem;
        }
        .nature {
          position: absolute;
          bottom: 0px;
          right: 0rem;
          width: 11rem;
          height: 8.9rem;
        }
        @media (max-width: 1024px) {
          .items {
            margin-left: 1rem;
          }
        }
        @media (max-width: 1000px) {
          .wrapper section {
            padding-bottom: 7rem;
          }
        }
      `}</style>
    </div>
  );
}
